{% extends 'global/base.html' %}


{% block title %} Cart {% endblock title %}


{% block message %}
{% include 'global/partials/messages.html' %}
{% endblock message %}


{% block content %}
<div class="cart-container">
    <h1>Shopping Cart</h1>
    {% for item in itens %}

    <div class="cart-item">
        <img src="{{ item.product.cover.url }}" alt="product_img">
        <div class="cart-middle-content">
            <h2>{{ item.product.name }}</h2>
            <p class="product_available left">
                Available - {{ item.product.quantity_stocked }}
            </p>
        </div>
        <form class="form-quantity-cart" action="{% url 'cart_update' id=item.id %}" method="post">
            {% csrf_token %}
            <label for="quantity-{{ item.id }}">Qtd:</label>
            <input id="quantity-{{ item.id }}" name="quantity" class="product-quantity-cart" type="number" min="1"
                value="{{ item.quantity }}">
            <button type="submit" class="btn-update-cart">Atualizar</button>
        </form>
        <p class="product-price-cart">$ {{ item.total_value }}</p>
        <a class="delete-icon" href="{% url 'remove_to_cart' id=item.id %}">
        <i class="fa-solid fa-trash"></i>
        </a>
    </div>

    {% endfor %}
    <h3>Subtotal ({{ num_itens }} ite{{ num_itens|pluralize:"m,ns" }} ): $ {{ subtotal }}</h3>
</div>
{% endblock content %}